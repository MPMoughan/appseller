

<div class="container">
<% @sale.items.each do |item| %>
<h4>Here is the item... <%= item.name %></h4>
<% end %>
  <div class="col-md-12" id="itemtable" >
   <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <% @sale.items.each do |item| %>
          <tr>
            <td class="col-md-3"><%= item.name %></td>
            <td class="col-md-3"><%= item.description %></td>
            <td class="col-md-2">$<%= item.price %></td>
          </tr>

        </tbody>
      </table>
      <br>
    </div>
  <div="col-md-4"><img src="<%= item.file %>" alt="" height="400" width="400"></div>
  <% end %>
    <br>
    <hr>

    <div>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">
      Buy this item?
      </button>
    </div>
  </div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Braintree Credit Card Transaction Form</h4>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
          <label for="recipient-name" class="control-label">Card Number:</label>
          <input type="text" size="20" autocomplete="off" data-encrypted-name="number" />
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label">CVV:</label>
            <input type="text" size="4" autocomplete="off" data-encrypted-name="cvv" />
          </div>

          <div class="form-group">
            <label for="message-text" class="control-label">Expiration (MM/YYYY)</label>
            <input type="text" size="2" data-encrypted-name="month" /> / <input type="text" size="4" data-encrypted-name="year" />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <span> <%= button_to "Buy This Item", {
            :action => :update,
            :controller => :sales
            },
            :method => :patch
            %> </span>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="exampleModalLabel">Braintree Credit Card Transaction Form</h4>
      </div>
      <div class="modal-body">
        <form role="form">
          <div class="form-group">
            <label for="recipient-name" class="control-label">Card Number:</label>
          <label>Card Number</label>
          <input type="text" size="20" autocomplete="off" data-encrypted-name="number" />
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label">Message:</label>
            <textarea class="form-control" id="message-text"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="text-center">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

       <%= button_to "Buy This Item", {
            :action => :update,
            :controller => :sales
            },
            :method => :patch,
            class: "btn btn-primary" %>

      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="https://js.braintreegateway.com/v1/braintree.js"></script>
<script type="text/javascript">
  var braintree = Braintree.create("YourClientSideEncryptionKey");
  braintree.onSubmitEncryptForm('braintree-payment-form');
</script>
